<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<body>
<div class="container1">
  <div>
    <h1 th:text="${article.title}"></h1>
    <div>
      <label th:for="body">[내용]</label>
      <p th:text="${article.body}"></p>
    </div>
    <div>
      <label th:for="writeUser">작성자</label>
      <p th:text="${article.writeUser}"></p>
    </div>
  </div>
</div> <!-- /container -->
<div class="container2">
  <form role="form" action="/comment/write" th:object="${commentForm}"
        method="POST">

    <div class="form-group">
      <label th:for="body">댓글</label>
      <input type="text" th:field="*{body}" class="form-control-body"
             th:class="${#fields.hasErrors('body')}? 'form-control fieldError' : 'form-control'"
             placeholder="댓글을 입력하세요">
      <div class="invalid-feedback-body" th:errors="*{body}" style="display:block;">
        Please select a valid state.
      </div>
    </div>

    <div>
      <input type="hidden" th:id="articleId" th:name="articleId"
             th:value="${article.id}" class="form-control">
    </div>

    <button type="submit" class="btn btn-primary">Submit</button>
  </form>
</div>

<div class="comments">
  <div>
    <table class="table table-striped">
      <thead>
      <tr>
        <th>#</th>
        <th>내용</th>
        <th>작성자</th>
        <th>등록일</th>
      </tr>
      </thead>
      <tbody>
      <tr th:each="comment : ${comments}">
        <form method="post" action="/comment/nestedReply" th:object="${commentForm}">
          <td th:if="${comment.step >= 1}">
            ㄴ
          </td>
          <td>
            <input type="hidden" th:value="${comment.id}"
                   th:id="parentId" th:name="parentId">
            <input type="hidden" th:value="${comment.articleId}"
                   th:id="articleId" th:name="articleId">
          </td>
          <td th:text="${comment.body}"></td>
          <td th:text="${comment.writeUser}"></td>
          <td th:text="${comment.regDate}"></td>
          <td>
            <label th:for="body">답글</label>
            <input type="text" th:field="*{body}" class="form-control"
                   placeholder="제목을 입력하세요">
          </td>
          <td>
            <button type="submit" class="btn btn-primary">Submit</button>
          </td>
        </form>
          <td>
            <div class="delete">
              <div th:if="${user.loginId == comment.writeUser}">
                <form method="post" action="/comment/delComment" th:object="${commentForm}">
                  <input type="hidden" th:value="${comment.id}"
                         th:id="id" th:name="id">
                  <input type="hidden" th:value="${article.id}"
                         th:id="articleId" th:name="articleId">
                  <button type="submit" class="btn btn-primary">댓글삭제</button>
                </form>
              </div>
            </div>
          </td>
      </tr>
      </tbody>
    </table>
  </div>
  <a href="#" th:href="@{/}">홈으로 가기</a>
</div> <!-- /container -->
</body>
</html>